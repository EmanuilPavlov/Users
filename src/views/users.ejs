<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/styles/output.css" rel="stylesheet">
    <title>Users</title>
</head>
<body class="bg-gray-50">

<div class="container mx-auto p-6">
    <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-2">
            <!-- Search Section -->
            <input type="text" id="searchInput" placeholder="Search users..."
                   class="border border-gray-300 rounded px-3 py-2 w-64">
            <button id="searchBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" onclick="loadUsers()">
                Search
            </button>
        </div>

        <!-- Create User Button -->
        <button id="createUserBtn" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700" onclick="openModal()">
            Create User
        </button>
    </div>

    <!-- Success/Error messages -->
    <div id="message" class="mb-4"></div>

    <!-- Users Table -->
    <table class="min-w-full border border-gray-300 divide-y divide-gray-200 bg-white">
        <thead class="bg-gray-100">
        <tr>
            <th class="px-2 py-2 text-left text-gray-700">Avatar</th>
            <th class="px-2 py-2 text-left text-gray-700">Name</th>
            <th class="px-2 py-2 text-left text-gray-700">Email</th>
            <th class="px-2 py-2 text-left text-gray-700">Actions</th>
        </tr>
        </thead>
        <tbody id="usersTable" class="divide-y divide-gray-200">
        <!-- Rows will be loaded via JS -->
        </tbody>
    </table>
</div>

<!-- Modal for Create/Edit - MOVED OUTSIDE CONTAINER -->
<div id="userFormModal" class="hidden fixed inset-0 z-50">
    <!-- Backdrop with blur effect -->
    <div class="fixed inset-0 bg-black/50 backdrop-blur-sm"></div>

    <!-- Modal content -->
    <div class="relative flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-lg p-6 w-full max-w-sm shadow-2xl">
            <h2 id="formTitle" class="text-xl font-semibold mb-4">Create User</h2>

            <form id="userForm" class="space-y-4">
                <div>
                    <label class="block mb-1">Name</label>
                    <input type="text" id="name" name="name"
                           class="w-full border px-3 py-2 rounded" required>
                </div>

                <div>
                    <label class="block mb-1">Email</label>
                    <input type="email" id="email" name="email"
                           class="w-full border px-3 py-2 rounded" required>
                </div>

                <div class="flex justify-end gap-2">
                    <button type="button" id="cancelBtn" class="px-4 py-2 border rounded hover:bg-gray-50" onclick="closeModal()">Cancel</button>
                    <button type="button" id="saveBtn" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700" onclick="saveOrUpdateUser()">Save
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script src="/js/user.js"></script>
</body>
</html>